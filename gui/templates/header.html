  <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark">
  <a class="navbar-brand mr-auto mr-lg-0" href="#">Logo</a>
  <button class="navbar-toggler p-0 border-0" type="button" data-toggle="offcanvas">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">List Manga <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#" data-toggle="modal" data-target="#newMangaModal">Add Manga</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#" data-toggle="modal" data-target="#aboutModal">About</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Settings</a>
        <div class="dropdown-menu" aria-labelledby="dropdown01">
          <a class="dropdown-item" href="#">Action</a>
          <a class="dropdown-item" href="#">Another action</a>
          <a class="dropdown-item" href="#">Something else here</a>
        </div>
      </li>
    </ul>
    
    <ul class="navbar-nav mr-1">>
      <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Status
        </button>

        <div class="dropdown-menu dropdown-menu-lg-right" aria-labelledby="dropdownMenuButton">
          <strong class="manga-label mx-2">Scrape : -</strong>
          <div class="progress" style="width: 300px;height: 22px; margin: 10px;">
            <div class="progress-bar" role="progressbar" aria-valuenow="0"
                 aria-valuemin="0" aria-valuemax="100" style="width: 0%">
                <span class="progress-bar-label" style="color: black">0/0 chapters</span>
            </div>
          </div>
          <a href="/stop_crawl">
            <button id="stop_button" class="btn btn-danger mx-2" onClick="disabled=true">Stop</button>
          </a>
        </div>

      </div>
      
      
      <a href="/shutdown">
        <button class="btn btn-primary mx-2 my-2 my-sm-0">Quit</button>
      </a>
    </ul>

  </div>
</nav>


<!-- ABOUT MODAL -->
<div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">About</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <strong>Scraping-Manga v1.0</strong>
          <br>
          Created by: Irfan Chahyadi
          <br>
          Github: <a href="https://github.com/irfanchahyadi" target="_blank">github.com/irfanchahyadi</a>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- END ABOUT MODAL -->


<!-- NEW MANGA MODAL -->
<div class="modal fade" id="newMangaModal" tabindex="-1" role="dialog" aria-labelledby="newMangaModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Add Manga</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
      <div class="container-fluid">
        <div class="row">
              <form style="width:800px" action="/new_manga" method="post" id="new_manga" enctype="multipart/form-data">

                <div class="form-group row"  style="width:400px">
                  <label for="mangaName" class="col-sm-4 col-form-label">Name</label>
                  <div class="col-sm-8">
                    <input class="form-control form-control-sm" name="mangaName" placeholder="Manga Name">
                  </div>
                </div>
                <div class="form-group row"  style="width:400px">
                  <label for="imageFile" class="col-sm-4 col-form-label">Image File</label>
                  <div class="col-sm-8">
                    <input type="file" class="form-control-file" name="imageFile" placeholder="Image File">
                  </div>
                </div>
                <div class="form-group row">
                  <label for="description" class="col-sm-2 col-form-label">Description</label>
                  <div class="col-sm-10">
                    <textarea class="form-control form-control-sm" name="description" placeholder="Description" rows=3></textarea>
                  </div>
                </div>
                <div class="form-group row"  style="width:400px">
                  <label for="language" class="col-sm-4 col-form-label">Language</label>
                  <div class="col-sm-8">
                    <select class="form-control form-control-sm" name="language" placeholder="Language">
                      <option value="1" selected>Indonesia</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row"  style="width:400px">
                  <label for="crawler" class="col-sm-4 col-form-label">Crawler</label>
                  <div class="col-sm-8">
                    <input class="form-control form-control-sm" name="crawler" placeholder="Crawler">
                  </div>
                </div>
                <div class="form-group row"  style="width:800px">
                  <label class="col-sm-2 col-form-label">URL & Selector</label>
                  <div class="col-sm-10">
                    <div class="form-row">
                      <div class="col">
                        <input class="form-control form-control-sm" name="url" placeholder="URL">
                      </div>
                      <div class="col">
                        <input class="form-control form-control-sm" name="selector" placeholder="Selector">
                      </div>
                    </div>
                  </div>
                </div>

              </form>
        </div>
      </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary" form="new_manga" value="sumbit">Save</button>
      </div>
    </div>
  </div>
</div>

<!-- END NEW MANGA MODAL -->



<script>
    $(document).ready(function () {
        event.preventDefault();
        var source = new EventSource("/progress");
        source.onmessage = function (event) {
            var data = jQuery.parseJSON(event.data)
            var update = Math.round((data.now * 100)/ data.end)
            $('.progress-bar').css('width', update + '%').attr('aria-valuenow', update);
            $('.progress-bar-label').text(data.now + '/' + data.end + ' chapters');
            $('.manga-label').text('Scrape : ' + data.manga);
            if (update == 100) {
                source.close()
            }
        }
    });


    
</script>

<script>
    $(document).ready(function () {
        $("#stop_button").submit(function (e) {
            e.preventDefault();
            $(this).attr("disabled", true);
            return true;
        });
    });
</script>